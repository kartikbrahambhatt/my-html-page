<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym Management App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; }
        .hidden { display: none !important; }
        .btn { padding: 8px 16px; border-radius: 6px; cursor: pointer; border: none; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #059669; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        .input { width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; }
        .input:focus { outline: none; border-color: #3b82f6; }
        .card { background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .status-active { background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 12px; font-size: 12px; }
        .status-pending { background: #fef3c7; color: #92400e; padding: 4px 8px; border-radius: 12px; font-size: 12px; }
        .status-paid { background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 12px; font-size: 12px; }
        .status-unpaid { background: #fecaca; color: #991b1b; padding: 4px 8px; border-radius: 12px; font-size: 12px; }
        .notification { padding: 16px; border-radius: 8px; margin-bottom: 16px; }
        .notification-warning { background: #fef3c7; color: #92400e; }
        .notification-error { background: #fecaca; color: #991b1b; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        th { background: #f9fafb; font-weight: 600; }
        .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; padding: 16px; }
        .modal-content { background: white; padding: 24px; border-radius: 12px; max-width: 500px; width: 100%; }
    </style>
</head>
<body class="bg-gray-100">

<!-- Login Screen -->
<div id="loginScreen" class="min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4">
    <div class="card max-w-md w-full">
        <div class="text-center mb-8">
            <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="text-blue-600 text-2xl">üèãÔ∏è</span>
            </div>
            <h1 class="text-2xl font-bold text-gray-800">Gym Management</h1>
            <p class="text-gray-600">Login to your account</p>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                <input type="text" id="loginPhone" class="input" placeholder="Enter phone number or 'admin'">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input type="password" id="loginPassword" class="input" placeholder="Enter password (admin123 for admin)">
            </div>
            
            <button onclick="handleLogin()" class="w-full btn btn-primary py-3">Login</button>
        </div>
        
        <div class="mt-6 text-center">
            <button onclick="showRegister()" class="text-blue-600 hover:text-blue-700 text-sm">
                New member? Register here
            </button>
        </div>
    </div>
</div>

<!-- Register Screen -->
<div id="registerScreen" class="hidden min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4">
    <div class="card max-w-md w-full">
        <h2 class="text-2xl font-bold text-center mb-6">New Member Registration</h2>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                <input type="text" id="regName" class="input" required>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                <input type="tel" id="regPhone" class="input" required>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                <select id="regGender" class="input">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Membership Plan</label>
                <select id="regPlan" class="input">
                    <option value="1month">1 Month - ‚Çπ800</option>
                    <option value="3month">3 Months - ‚Çπ2000</option>
                    <option value="6month">6 Months - ‚Çπ4000</option>
                </select>
            </div>
            
            <button onclick="handleRegister()" class="w-full btn btn-primary py-3">Register</button>
        </div>
        
        <div class="mt-4 text-center">
            <button onclick="showLogin()" class="text-blue-600 hover:text-blue-700 text-sm">
                Back to Login
            </button>
        </div>
    </div>
</div>

<!-- Admin Dashboard -->
<div id="adminDashboard" class="hidden min-h-screen bg-gray-100">
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800">Admin Dashboard</h1>
            <div class="flex items-center space-x-4">
                <span class="text-gray-600">Welcome, Admin</span>
                <button onclick="logout()" class="btn btn-danger">Logout</button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto p-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="card">
                <div class="flex items-center">
                    <span class="text-blue-500 text-2xl mr-4">üë•</span>
                    <div>
                        <p class="text-sm text-gray-500">Total Members</p>
                        <p class="text-2xl font-bold" id="totalMembers">0</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="flex items-center">
                    <span class="text-green-500 text-2xl mr-4">‚úÖ</span>
                    <div>
                        <p class="text-sm text-gray-500">Active Members</p>
                        <p class="text-2xl font-bold" id="activeMembers">0</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="flex items-center">
                    <span class="text-orange-500 text-2xl mr-4">üí≥</span>
                    <div>
                        <p class="text-sm text-gray-500">Pending Payments</p>
                        <p class="text-2xl font-bold" id="pendingPayments">0</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="flex items-center">
                    <span class="text-red-500 text-2xl mr-4">‚ö†Ô∏è</span>
                    <div>
                        <p class="text-sm text-gray-500">Expiring Soon</p>
                        <p class="text-2xl font-bold" id="expiringMembers">0</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold">All Members</h2>
                <button onclick="showAddMember()" class="btn btn-primary">+ Add Member</button>
            </div>
            
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Plan</th>
                            <th>Status</th>
                            <th>Expires</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="membersTable">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Member Dashboard -->
<div id="memberDashboard" class="hidden min-h-screen bg-gray-100">
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800">Member Dashboard</h1>
            <div class="flex items-center space-x-4">
                <span class="text-gray-600" id="memberWelcome">Welcome</span>
                <button onclick="logout()" class="btn btn-danger">Logout</button>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto p-6">
        <div id="memberNotifications"></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="card">
                <h3 class="text-lg font-semibold mb-4">Membership Status</h3>
                <div class="space-y-2" id="membershipStatus">
                </div>
            </div>

            <div class="card">
                <h3 class="text-lg font-semibold mb-4">Payment Status</h3>
                <div class="space-y-2" id="paymentStatus">
                </div>
            </div>
        </div>

        <div class="card">
            <h3 class="text-lg font-semibold mb-4">Membership Plans</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 border rounded-lg">
                    <h4 class="font-medium">1 Month</h4>
                    <p class="text-2xl font-bold text-blue-600">‚Çπ800</p>
                    <p class="text-sm text-gray-500">Available</p>
                </div>
                <div class="p-4 border rounded-lg">
                    <h4 class="font-medium">3 Months</h4>
                    <p class="text-2xl font-bold text-blue-600">‚Çπ2000</p>
                    <p class="text-sm text-gray-500">Available</p>
                </div>
                <div class="p-4 border rounded-lg">
                    <h4 class="font-medium">6 Months</h4>
                    <p class="text-2xl font-bold text-blue-600">‚Çπ4000</p>
                    <p class="text-sm text-gray-500">Available</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Member Modal -->
<div id="addMemberModal" class="hidden modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">Add New Member</h3>
            <button onclick="hideAddMember()" class="text-gray-400 hover:text-gray-600 text-xl">√ó</button>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                <input type="text" id="addName" class="input">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                <input type="tel" id="addPhone" class="input">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                <select id="addGender" class="input">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Membership Plan</label>
                <select id="addPlan" class="input">
                    <option value="1month">1 Month - ‚Çπ800</option>
                    <option value="3month">3 Months - ‚Çπ2000</option>
                    <option value="6month">6 Months - ‚Çπ4000</option>
                </select>
            </div>
            
            <div class="flex space-x-4">
                <button onclick="addMember()" class="flex-1 btn btn-primary">Add Member</button>
                <button onclick="hideAddMember()" class="flex-1 btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>
</div>

<script>
// Data storage
let members = [
    {
        id: 1,
        name: "Rahul Sharma",
        phone: "9876543210",
        gender: "Male",
        membershipType: "1month",
        startDate: new Date('2024-08-15'),
        endDate: new Date('2024-09-15'),
        status: "active",
        paymentStatus: "paid"
    },
    {
        id: 2,
        name: "Priya Patel",
        phone: "9876543211",
        gender: "Female",
        membershipType: "3month",
        startDate: new Date('2024-07-01'),
        endDate: new Date('2024-10-01'),
        status: "active",
        paymentStatus: "paid"
    }
];

let currentUser = null;
let isAdmin = false;

const membershipPlans = {
    "1month": { duration: 1, price: 800, label: "1 Month" },
    "3month": { duration: 3, price: 2000, label: "3 Months" },
    "6month": { duration: 6, price: 4000, label: "6 Months" }
};

// Utility functions
function hideAllScreens() {
    document.getElementById('loginScreen').classList.add('hidden');
    document.getElementById('registerScreen').classList.add('hidden');
    document.getElementById('adminDashboard').classList.add('hidden');
    document.getElementById('memberDashboard').classList.add('hidden');
}

function showLogin() {
    hideAllScreens();
    document.getElementById('loginScreen').classList.remove('hidden');
}

function showRegister() {
    hideAllScreens();
    document.getElementById('registerScreen').classList.remove('hidden');
}

function showAdminDashboard() {
    hideAllScreens();
    document.getElementById('adminDashboard').classList.remove('hidden');
    updateAdminStats();
    updateMembersTable();
}

function showMemberDashboard() {
    hideAllScreens();
    document.getElementById('memberDashboard').classList.remove('hidden');
    updateMemberDashboard();
}

// Login function
function handleLogin() {
    const phone = document.getElementById('loginPhone').value;
    const password = document.getElementById('loginPassword').value;
    
    if (phone === "admin" && password === "admin123") {
        isAdmin = true;
        currentUser = { name: "Admin", phone: "admin" };
        showAdminDashboard();
    } else {
        const member = members.find(m => m.phone === phone);
        if (member) {
            isAdmin = false;
            currentUser = member;
            showMemberDashboard();
        } else {
            alert("Invalid phone number or member not found");
        }
    }
}

// Register function
function handleRegister() {
    const name = document.getElementById('regName').value;
    const phone = document.getElementById('regPhone').value;
    const gender = document.getElementById('regGender').value;
    const membershipType = document.getElementById('regPlan').value;
    
    if (!name || !phone) {
        alert('Please fill in all required fields');
        return;
    }
    
    const newMember = {
        id: Date.now(),
        name: name,
        phone: phone,
        gender: gender,
        membershipType: membershipType,
        startDate: new Date(),
        endDate: new Date(Date.now() + (membershipPlans[membershipType].duration * 30 * 24 * 60 * 60 * 1000)),
        status: "pending",
        paymentStatus: "pending"
    };
    
    members.push(newMember);
    alert('Registration successful! Admin will activate your membership after payment confirmation.');
    
    // Clear form
    document.getElementById('regName').value = '';
    document.getElementById('regPhone').value = '';
    document.getElementById('regGender').value = 'Male';
    document.getElementById('regPlan').value = '1month';
    
    showLogin();
}

// Admin functions
function updateAdminStats() {
    const totalMembers = members.length;
    const activeMembers = members.filter(m => m.status === 'active').length;
    const pendingPayments = members.filter(m => m.paymentStatus === 'pending').length;
    const today = new Date();
    const expiringMembers = members.filter(m => {
        const daysLeft = Math.ceil((m.endDate - today) / (1000 * 60 * 60 * 24));
        return daysLeft <= 7 && daysLeft > 0;
    }).length;
    
    document.getElementById('totalMembers').textContent = totalMembers;
    document.getElementById('activeMembers').textContent = activeMembers;
    document.getElementById('pendingPayments').textContent = pendingPayments;
    document.getElementById('expiringMembers').textContent = expiringMembers;
}

function updateMembersTable() {
    const tbody = document.getElementById('membersTable');
    tbody.innerHTML = '';
    
    members.forEach(member => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>
                <div class="text-sm font-medium text-gray-900">${member.name}</div>
                <div class="text-sm text-gray-500">${member.gender}</div>
            </td>
            <td class="text-sm text-gray-900">${member.phone}</td>
            <td class="text-sm text-gray-900">${membershipPlans[member.membershipType].label}</td>
            <td>
                <span class="status-${member.status}">${member.status}</span>
                <span class="status-${member.paymentStatus === 'paid' ? 'paid' : 'unpaid'} ml-2">${member.paymentStatus}</span>
            </td>
            <td class="text-sm text-gray-900">${member.endDate.toLocaleDateString()}</td>
            <td class="text-sm space-x-2">
                ${member.paymentStatus === 'pending' ? 
                    `<button onclick="markPaid(${member.id})" class="btn btn-success text-xs">Mark Paid</button>` : 
                    ''
                }
                <button onclick="extendMembership(${member.id})" class="btn btn-primary text-xs">Extend +1M</button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function markPaid(memberId) {
    const member = members.find(m => m.id === memberId);
    if (member) {
        member.paymentStatus = 'paid';
        member.status = 'active';
        updateAdminStats();
        updateMembersTable();
    }
}

function extendMembership(memberId) {
    const member = members.find(m => m.id === memberId);
    if (member) {
        member.endDate = new Date(member.endDate.getTime() + (30 * 24 * 60 * 60 * 1000));
        member.status = 'active';
        updateAdminStats();
        updateMembersTable();
    }
}

function showAddMember() {
    document.getElementById('addMemberModal').classList.remove('hidden');
}

function hideAddMember() {
    document.getElementById('addMemberModal').classList.add('hidden');
    // Clear form
    document.getElementById('addName').value = '';
    document.getElementById('addPhone').value = '';
    document.getElementById('addGender').value = 'Male';
    document.getElementById('addPlan').value = '1month';
}

function addMember() {
    const name = document.getElementById('addName').value;
    const phone = document.getElementById('addPhone').value;
    const gender = document.getElementById('addGender').value;
    const membershipType = document.getElementById('addPlan').value;
    
    if (!name || !phone) {
        alert('Please fill in all required fields');
        return;
    }
    
    const newMember = {
        id: Date.now(),
        name: name,
        phone: phone,
        gender: gender,
        membershipType: membershipType,
        startDate: new Date(),
        endDate: new Date(Date.now() + (membershipPlans[membershipType].duration * 30 * 24 * 60 * 60 * 1000)),
        status: "pending",
        paymentStatus: "pending"
    };
    
    members.push(newMember);
    hideAddMember();
    updateAdminStats();
    updateMembersTable();
}

// Member functions
function updateMemberDashboard() {
    const member = currentUser;
    document.getElementById('memberWelcome').textContent = `Welcome, ${member.name}`;
    
    const today = new Date();
    const daysLeft = Math.ceil((member.endDate - today) / (1000 * 60 * 60 * 24));
    
    // Show notifications
    const notificationsDiv = document.getElementById('memberNotifications');
    notificationsDiv.innerHTML = '';
    
    if (daysLeft <= 7 && daysLeft > 0) {
        notificationsDiv.innerHTML = `
            <div class="notification notification-warning">
                <div class="flex items-center">
                    <span class="mr-2">üîî</span>
                    Your membership expires in ${daysLeft} day(s). Please renew soon!
                </div>
            </div>
        `;
    } else if (daysLeft <= 0) {
        notificationsDiv.innerHTML = `
            <div class="notification notification-error">
                <div class="flex items-center">
                    <span class="mr-2">üîî</span>
                    Your membership has expired. Please renew to continue.
                </div>
            </div>
        `;
    }
    
    // Update membership status
    document.getElementById('membershipStatus').innerHTML = `
        <p><span class="font-medium">Plan:</span> ${membershipPlans[member.membershipType].label}</p>
        <p><span class="font-medium">Status:</span> 
            <span class="status-${member.status} ml-2">${member.status}</span>
        </p>
        <p><span class="font-medium">Start Date:</span> ${member.startDate.toLocaleDateString()}</p>
        <p><span class="font-medium">End Date:</span> ${member.endDate.toLocaleDateString()}</p>
        <p><span class="font-medium">Days Remaining:</span> 
            <span class="ml-2 font-bold ${daysLeft <= 7 ? 'text-red-500' : 'text-green-500'}">${daysLeft > 0 ? daysLeft : 'Expired'}</span>
        </p>
    `;
    
    // Update payment status
    const paymentStatusDiv = document.getElementById('paymentStatus');
    paymentStatusDiv.innerHTML = `
        <p><span class="font-medium">Current Plan Fee:</span> ‚Çπ${membershipPlans[member.membershipType].price}</p>
        <p><span class="font-medium">Payment Status:</span>
            <span class="status-${member.paymentStatus === 'paid' ? 'paid' : 'unpaid'} ml-2">${member.paymentStatus}</span>
        </p>
    `;
    
    if (member.paymentStatus === 'pending') {
        paymentStatusDiv.innerHTML += `
            <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                <p class="text-yellow-800 text-sm">
                    Your payment is pending. Please contact the gym admin to confirm your payment.
                </p>
            </div>
        `;
    }
}

function logout() {
    currentUser = null;
    isAdmin = false;
    document.getElementById('loginPhone').value = '';
    document.getElementById('loginPassword').value = '';
    showLogin();
}

// Initialize app
showLogin();

// Check for expiring memberships daily (simplified for demo)
setInterval(() => {
    if (currentUser && !isAdmin) {
        updateMemberDashboard();
    }
}, 60000); // Check every minute for demo purposes
</script>

</body>
</html>